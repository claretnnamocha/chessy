<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Ludo</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        <style>
            .container{
                
                width: 100%;
                
            }
            .box{
                width:60px;
                height: 60px;
                border: 2px solid #eee;
                float: left;
                margin: 5px;
            }
            .button{
                clear: both;
            }
            .red_pin{
                width: 30px;
                height: 30px;
                border: 2px solid #fff;
                border-radius: 50px;
                background: red;
                margin: 15px;
            }
            .blue_pin{
                width: 30px;
                height: 30px;
                border: 2px solid #fff;
                border-radius: 50px;
                background: blue;
                margin: 15px;
            }
            .green_pin{
                width: 30px;
                height: 30px;
                border: 2px solid #fff;
                border-radius: 50px;
                background: green;
                margin: 15px;
            }
            .yellow_pin{
                width: 30px;
                height: 30px;
                border: 2px solid #fff;
                border-radius: 50px;
                background: yellow;
                margin: 15px;
            }
        </style>
    </head>
    <body>
        <div>
            <button id="new_player">New Player</button>
        </div>
        <div class="container">
            <div id="A1" class="box"></div>
            <div id="A2" class="box"></div>
            <div id="A3" class="box"></div>
            <div id="A4" class="box"></div>
            <div id="A5" class="box"></div>
            <div id="A6" class="box"></div>
            <div id="A7" class="box"></div>
            <div id="A8" class="box"></div>
            <div id="A9" class="box"></div>
            <div id="A10" class="box"></div>
            <div id="A11" class="box"></div>
            <div id="A12" class="box"></div>
            <div id="A13" class="box"></div>
            <div id="A14" class="box"></div>
            
            <div style="clear: both"></div>
            <div id="B1" class="box"></div>
            <div id="B2" class="box"></div>
            <div id="B3" class="box"></div>
            <div id="B4" class="box"></div>
            <div id="B5" class="box"></div>
            <div id="B6" class="box"></div>
            <div id="B7" class="box"></div>
            <div id="B8" class="box"></div>
            <div id="B9" class="box"></div>
            <div id="B10" class="box"></div>
            <div id="B11" class="box"></div>
            <div id="B12" class="box"></div>
            <div id="B13" class="box"></div>
            <div id="B14" class="box"></div>

            <div style="clear: both"></div>
            <div id="C1" class="box"></div>
            <div id="C2" class="box"></div>
            <div id="C3" class="box"></div>
            <div id="C4" class="box"></div>
            <div id="C5" class="box"></div>
            <div id="C6" class="box"></div>
            <div id="C7" class="box"></div>
            <div id="C8" class="box"></div>
            <div id="C9" class="box"></div>
            <div id="C10" class="box"></div>
            <div id="C11" class="box"></div>
            <div id="C12" class="box"></div>
            <div id="C13" class="box"></div>
            <div id="C14" class="box"></div>

            <div style="clear: both"></div>
            <div id="D1" class="box"></div>
            <div id="D2" class="box"></div>
            <div id="D3" class="box"></div>
            <div id="D4" class="box"></div>
            <div id="D5" class="box"></div>
            <div id="D6" class="box"></div>
            <div id="D7" class="box"></div>
            <div id="D8" class="box"></div>
            <div id="D9" class="box"></div>
            <div id="D10" class="box"></div>
            <div id="D11" class="box"></div>
            <div id="D12" class="box"></div>
            <div id="D13" class="box"></div>
            <div id="D14" class="box"></div>
        </div>
        <div class="button">
            <button id="roll">Roll</button>
            <button id="roll2">Roll x2</button>
        </div>
        <div>
            <div id="red_pins" style="float: left">
                <div class='red_pin'></div>
                <div class='red_pin'></div>
                <div class='red_pin'></div>
                <div class='red_pin'></div>
            </div>
            <div id="blue_pins" style="float: left">
                <div class='blue_pin'></div>
                <div class='blue_pin'></div>
                <div class='blue_pin'></div>
                <div class='blue_pin'></div>
            </div>
            <div id="green_pins" style="float: left">
                <div class='green_pin'></div>
                <div class='green_pin'></div>
                <div class='green_pin'></div>
                <div class='green_pin'></div>
            </div>
            <div id="yellow_pins" style="float: left">
                <div class='yellow_pin'></div>
                <div class='yellow_pin'></div>
                <div class='yellow_pin'></div>
                <div class='yellow_pin'></div>
            </div>
        </div>
        

    </body>
</html>
<script src="scripts/jquery-3.4.1.js"></script>
<script src="scripts/generate_walls.js"></script>
<script src="scripts/move.js"></script>
<script src="scripts/pins.js"></script>
<script src="scripts/players.js"></script>
<!-- always import constants last -->
<script src="scripts/constants.js"></script>
<script>
$("#roll").click(function(){
    //testing start
    player_id = player_id_default+""+0;
    pin = "red_pin";
    setPinInfo(pin);
    //testing end
    let die1 = Math.floor(Math.random() * 6) + 1;
    let die2 = Math.floor(Math.random() * 6) + 1;
    die1 = 2; die2 = 2;
    
    let holder = container.children().children(pin_class);
    let default_pin = "A0";
    
    // let current_box_id = holder.length == 0 ? default_pin : holder.parent().attr("id").replace("#");
    
    // current box on the board logic
    let current = holder.length == 0 ? default_pin : holder.parent().attr("id").replace("#");
    let current_base = (current == default_pin) ? bases[0] : holder.parent().attr("id").replace("#").substring(0,1);
    
    
    console.log("Total of Dice: " + (die1 + die2));
    
    let res = MovementObject.move(current, die1, die2, current_base, no_per_base, bases, GeneratorObject.blocks, pl1.get(player_id));
    // console.log(JSON.stringify(res))
    current = res.point;
    current_base = res.base;
    MovementObject.ui_move(pin_class, pin_html, container, res.starting_point, (die1 + die2), no_per_base, res.starting_base, bases, GeneratorObject)

});

$("#roll2").click(function(){
    //testing start
    player_id = player_id_default+""+1;
    pin = "green_pin";
    setPinInfo(pin);
    //testing end
    let die1 = Math.floor(Math.random() * 6) + 1;
    let die2 = Math.floor(Math.random() * 6) + 1;
    // die1 = 2; die2 = 2;
    
    let holder = container.children().children(pin_class);
    let default_pin = "A0";
    
    // let current_box_id = holder.length == 0 ? default_pin : holder.parent().attr("id").replace("#");
    
    // current box on the board logic
    let current = holder.length == 0 ? default_pin : holder.parent().attr("id").replace("#");
    let current_base = (current == default_pin) ? bases[0] : holder.parent().attr("id").replace("#").substring(0,1);
    
    
    console.log("Total of Dice: " + (die1 + die2));
    
    let res = MovementObject.move(current, die1, die2, current_base, no_per_base, bases, GeneratorObject.blocks, pl1.get(player_id));
    // console.log(JSON.stringify(res))
    current = res.point;
    current_base = res.base;
    MovementObject.ui_move(pin_class, pin_html, container, res.starting_point, (die1 + die2), no_per_base, res.starting_base, bases, GeneratorObject)

});

$("#new_player").click(function(){
    //add a new player
    let new_player_data = player_info[player_counter];
    player_id = player_id_default+""+player_counter;
    
    // add players
    pl1.new(player_counter, player_id, new_player_data , bases.length, pins_per_player)
    //add a new pin for the player
    // pn1 = new Pins(pl1.get(player_id));
    player_counter++;   
});

</script>